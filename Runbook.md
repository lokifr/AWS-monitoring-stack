# Operational Runbook - AWS Monitoring

This runbook describes how to diagnose and resolve alerts generated by the Prometheus monitoring system.

## ðŸ”´ Alert: InstanceDown
**Severity:** Critical
**Description:** The target instance has been unreachable for more than 1 minute.

### Diagnosis
1.  **Check instance status in AWS Console:** Is the EC2 instance running?
2.  **Check connectivity:** Can you Ping or SSH into the instance?
    ```bash
    ssh -i "keys/us-east1.pem" ubuntu@<InstanceIP>
    ```
3.  **Check Node Exporter status:**
    ```bash
    systemctl status node_exporter
    ```

### Resolution
*   **If EC2 is stopped:** Start the instance via AWS Console or CLI.
*   **If Node Exporter is stopped:**
    ```bash
    sudo systemctl restart node_exporter
    ```
*   **If firewall issue:** Check Security Group rules (Port 9100 must be open from Prometheus).

---

## ðŸŸ¡ Alert: HostHighCpuLoad
**Severity:** Warning
**Description:** CPU load is above 80% for 2 minutes.

### Diagnosis
1.  SSH into the instance.
2.  Run `top` or `htop` to identify the process consuming CPU.

### Resolution
*   If a specific process is misbehaving, restart it.
*   If the load is legitimate traffic, consider scaling up the instance type (e.g., t3.medium -> t3.large).

---

## ðŸŸ¡ Alert: HostHighMemoryUsage
**Severity:** Warning
**Description:** Memory usage is above 90% for 2 minutes.

### Diagnosis
1.  SSH into the instance.
2.  Run `free -h` to check available memory.
3.  Run `top` (press `M` to sort by memory) to find the culprit.

### Resolution
*   Identify memory leaks in applications.
*   Add swap space if temporary.
*   Upgrade instance size if consistent shortage.

---

## ðŸŸ¡ Alert: HostOutOfDiskSpace
**Severity:** Warning
**Description:** Disk usage is above 90% for 2 minutes.

### Diagnosis
1.  SSH into the instance.
2.  Run `df -h` to see which partition is full.
3.  Run `du -sh * | sort -rh` in the full directory to find large files.

### Resolution
*   Clean up old logs (`/var/log`).
*   Remove unused packages (`sudo apt autoremove`).
*   Expand the EBS volume size in AWS.
